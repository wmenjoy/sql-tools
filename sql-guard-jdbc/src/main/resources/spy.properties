# P6Spy SQL Safety Guard Configuration
# This file configures P6Spy to intercept JDBC calls and validate SQL safety

# ============================================================================
# Module Registration
# ============================================================================
# Register the SQL Safety Guard module for automatic SQL validation
modulelist=com.footstone.sqlguard.interceptor.p6spy.P6SpySqlSafetyModule

# ============================================================================
# Logging Configuration
# ============================================================================
# Use SLF4J for logging integration with application logging framework
appender=com.p6spy.engine.spy.appender.Slf4JLogger

# Log message format (single line for better readability)
logMessageFormat=com.p6spy.engine.spy.appender.SingleLineFormat

# ============================================================================
# Database Driver Configuration
# ============================================================================
# List of JDBC drivers to wrap (add your database driver here)
# Common drivers included by default:
# - MySQL: com.mysql.cj.jdbc.Driver
# - PostgreSQL: org.postgresql.Driver
# - H2: org.h2.Driver
# - Oracle: oracle.jdbc.OracleDriver
# - SQL Server: com.microsoft.sqlserver.jdbc.SQLServerDriver
driverlist=com.mysql.cj.jdbc.Driver,org.postgresql.Driver,org.h2.Driver

# ============================================================================
# Filtering Configuration
# ============================================================================
# Exclude system/internal queries from logging (optional)
# Uncomment to exclude specific categories
#excludecategories=info,debug,result,resultset

# Date format for timestamps in logs
dateformat=yyyy-MM-dd HH:mm:ss

# ============================================================================
# Performance Configuration
# ============================================================================
# Enable/disable P6Spy (set to false to disable without removing configuration)
#autoflush=true

# Log file location (optional, uses SLF4J by default)
#logfile=spy.log

# ============================================================================
# SQL Safety Guard Configuration
# ============================================================================
# Violation strategy: BLOCK, WARN, or LOG
# Configure via system property: -Dsqlguard.p6spy.strategy=BLOCK
# Default: LOG (observation mode)
#
# BLOCK: Throw SQLException and prevent SQL execution
# WARN:  Log error message but continue execution
# LOG:   Log warning message and continue execution (recommended for initial rollout)

# ============================================================================
# Usage Notes
# ============================================================================
# 1. Change your JDBC driver class to: com.p6spy.engine.spy.P6SpyDriver
# 2. Prefix your JDBC URL with "p6spy:": jdbc:p6spy:mysql://localhost:3306/mydb
# 3. Add this spy.properties file to your classpath
# 4. Set violation strategy via system property (optional)
# 5. Monitor logs for SQL safety violations
